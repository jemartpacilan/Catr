{% extends 'feedstream/base.html' %}
{% load static %}

{% block styles %}
<link href="{% static 'feedstream/css/index.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
<!--
<div id="loading" v-show="buffer">
  <h1 id="cook">Cooking in progress..</h1>
  <div id="cooking">
      <div class="bubble"></div>
      <div class="bubble"></div>
      <div class="bubble"></div>
      <div class="bubble"></div>
      <div class="bubble"></div>
      <div id="area">
          <div id="sides">
              <div id="pan"></div>
              <div id="handle"></div>
          </div>
          <div id="pancake">
              <div id="pastry"></div>
          </div>
      </div>
  </div>
</div>
-->
<div>
  <!-- Hero -->
  <section class="hero">
    <div class="container text-center">
      <div class="row header_row">
        <div class="col-md-12">
          <h1 class="sitename">CATR</h1>
        </div>
      </div>

      <div class="row">
          <div class="col-sm-3"></div>
          <div class="col-sm-6">
            <input type="text" class="mt-sm-4 mb-sm-4 form-control" id="usr" placeholder="Looking for a caterer?" v-model="searchTerm" v-on:keyup="enterSearch">
            <!-- <input type="text" class="form-control" id="usr"> -->
          </div>
          <button class="purebutton btn btn-full" href="#about" v-on:click="buttonSearch">Search</button>
          <div class="col-sm-2"></div>
      </div>
    </div>
  </section>
  <!-- Hero -->

    <!-- Subheader -->
    <div class="sub_nav" id="nav_bar">
      <ul class="nav-menu">
        <li><a href="#trending" v-on:click="newCaterer(0)" class="act subnav_selected">Trending</a></li>
        <li><a href="#near" v-on:click="newCaterer(1)" class="act">Near Me</a></li>
        <li><a class="act ">Featured</a></li>
        <li><a href="#new" v-on:click="newCaterer(4)" class="act">Newly Opened</a></li>
      </ul>
    </div>
    <!-- Subheader -->

    <!-- Feed -->
    <div class="feed">
        {% if all_caterer_objects %}
        <!-- else -->
        <ul class="feed__entries">

          <li v-for="caterer in results">
            <div class="container">
                <div class="feed__entry__box feed__entry__box--image">
                  <a v-bind:href="caterer.caterer.id">
                  <img v-bind:src="caterer.caterer.profile_image" alt="">
                </a>
                    <!-- <div class="overlay">
                      <div class="text">${caterer.lowest} - ${caterer.highest} ${caterer.business_description | truncate(150)}</div>
                    </div> -->

                </div>
              </div>
                <div class="feed_title top">
                  <div class="title">

                    <div class="left_title">
                      <p>${caterer.caterer.business_name}</p>
                      <p><span>${caterer.caterer.street_address | truncate(26)}</span></p>
                    </div>
                    <div class="right_title">
                      <!-- ${caterer.average} -->
                      <p><span>${caterer.average | truncateNum(3)}</span></p>
                    </div>
                  </div>

                  <div class="description">
                    ${caterer.caterer.business_description | truncate(150)}
                    <p>Price range: ${caterer.lowest} - ${caterer.highest}</p>
                  </div>
                </div>
          </li>

        </ul>
    {% endif %}
    </div>


  <!-- Feed -->

  <a class="scrolltop" href="#"><span class="fa fa-angle-up"></span></a>
</div>
{% endblock %}

{% block script %}

<script type="text/javascript" src="{% static 'feedstream/js/stars.js' %}"></script>
<script src="{% static 'feedstream/js/show-description.js'%}" type="text/javascript"></script>
<script src="{% static 'feedstream/js/vue_display.js'%}" type="text/javascript"></script>
<script src="{% static 'feedstream/js/stickynav.js'%}" type="text/javascript"></script>
{% endblock %}
